use djangodatabase;
CREATE TABLE user(
    user_id INT AUTO_INCREMENT,
    profile_pic BLOB,
    password VARCHAR(30) not null,
    first_name VARCHAR(30),
    last_name VARCHAR(30),
    street VARCHAR(30),
    state VARCHAR(30),
    zip VARCHAR(30),
    wallet_amount DECIMAL(5,2) default 0,
    DoB DATE NOT NULL,
    email VARCHAR(30),
    about VARCHAR(30),
    PRIMARY KEY(user_id)
);
INSERT INTO user(first_name, last_name, email, password, DoB)
VALUES ("Andrew", "NG", "andrew@gmail.com", "abcd", "2017-06-15");


DROP TABLE IF EXISTS venue;
create table venue(
    venue_id INT AUTO_INCREMENT,
    venue_name VARCHAR(20),
    capacity INT,
    availability BOOL,
    street VARCHAR(20),
    state VARCHAR(20),
    zip VARCHAR(20),
    PRIMARY KEY(venue_id)
);

-- insert venue
INSERT INTO venue (venue_name, capacity, availability, street, state, zip)
			VALUES ('Kalidas', 420, True, 'Nalanda Street', 'WB', '721301');
			


DROP TABLE IF EXISTS events;
create table events(
    event_id INT AUTO_INCREMENT,
    host_id INT,
    event_name VARCHAR(20),
    time_stamp DATE,
    start_time TIME,
    end_time TIME,
    venue_id INT,
    max_capacity INT,
    description VARCHAR(300),
    image BLOB,
    cost INT,
    FOREIGN KEY (host_id) REFERENCES user(user_id) ON DELETE CASCADE,
    FOREIGN KEY (venue_id) REFERENCES venue(venue_id) ON DELETE CASCADE,
    PRIMARY KEY(event_id)
);

-- Add a event
INSERT INTO events (host_id, event_name, time_stamp, start_time, end_time, venue_id, max_capacity, description, cost)
					VALUES('1', 'Comedy Nights', '2021-03-27', '10:00', '12:00', 1, 420, 'something', 500);
